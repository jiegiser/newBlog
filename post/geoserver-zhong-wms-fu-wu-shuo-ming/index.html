<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>geoserver 中 WMS 服务说明 | jiegiser的博客</title>
<meta name="description" content="温故而知新">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://jiegiser.github.io/newBlog/favicon.ico?v=1592264340072">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://jiegiser.github.io/newBlog/styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />



  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://jiegiser.github.io/newBlog">
        <img src="https://jiegiser.github.io/newBlog/images/avatar.png?v=1592264340072" class="site-logo">
        <h1 class="site-title">jiegiser的博客</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="https://jiegiser.github.io/newBlog" class="site-nav">
            首页
          </a>
        
      
        
          <a href="https://jiegiser.github.io/newBlog/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="https://jiegiser.github.io/newBlog/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="https://jiegiser.github.io/newBlog/post/about/" class="site-nav">
            关于
          </a>
        
      
        
          <a href="https://blog.csdn.net/cj9551" class="site-nav">
            CSDN
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      温故而知新
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/jiegiser" target="_blank">jiegiser</a> | <a class="rss" href="https://jiegiser.github.io/newBlog/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">geoserver 中 WMS 服务说明</h2>
            <div class="post-date">2019-12-21</div>
            
              <div class="feature-container" style="background-image: url('data:image/png;base64,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')">
              </div>
            
            <div class="post-content">
              <h3 id="简介">简介</h3>
<p><code>OGC Web</code>地图服务（<code>WMS</code>）规范定义了一个<code>HTTP</code>接口，用于从服务器请求地理参考的地图图像。<code>GeoServer</code>支持<code>WMS 1.1.1</code>（使用最多的<code>WMS</code>版本）以及<code>WMS 1.3.0</code>。<br>
<code>GeoServer</code>还支持样式化图层描述符（<code>SLD</code>）标准对<code>WMS</code>规范的某些扩展，以控制地图输出的样式。</p>
<h3 id="wms可以做什么">WMS可以做什么</h3>
<p><code>WMS</code>提供了用于请求地理空间地图图像的标准接口。这样做的好处是<code>WMS</code>客户端可以从多个<code>WMS</code>服务器请求图像，然后将它们组合到一个用户视图中。该标准保证了这些图像都可以像现实中那样完全重叠。许多服务器和客户端支持<code>WMS</code>。</p>
<h3 id="功能">功能</h3>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>Exceptions</td>
<td>发生异常</td>
</tr>
<tr>
<td>GetCapabilities</td>
<td>检索有关服务的元数据，包括支持的操作和参数以及可用层的列表</td>
</tr>
<tr>
<td>GetMap</td>
<td>检索指定区域和内容的地图图像</td>
</tr>
<tr>
<td>GetFeatureInfo</td>
<td>检索地图上像素位置的基础数据，包括几何和属性值</td>
</tr>
<tr>
<td>DescribeLayer</td>
<td>指示WFS或WCS检索有关该图层的其他信息。</td>
</tr>
<tr>
<td>GetLegendGraphic</td>
<td>检索地图生成的图例</td>
</tr>
</tbody>
</table>
<p>下面就详细介绍一个每个功能类型。</p>
<h4 id="exceptions">Exceptions</h4>
<p><code>WMS</code>可以报告异常的格式。支持的异常值为：</p>
<table>
<thead>
<tr>
<th>格式</th>
<th>表达式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>XML格式</td>
<td>EXCEPTIONS=application/vnd.ogc.se_xml</td>
<td>Xml输出。（默认格式）</td>
</tr>
<tr>
<td>图形</td>
<td>EXCEPTIONS=application/vnd.ogc.se_inimage</td>
<td>生成图像（在geoserver的图层预览功能中发生异常会使用）</td>
</tr>
<tr>
<td>空白</td>
<td>EXCEPTIONS=application/vnd.ogc.se_blank</td>
<td>生成空白图像</td>
</tr>
<tr>
<td>局部图</td>
<td>EXCEPTIONS=application/vnd.gs.wms_partial</td>
<td>这是一个GeoServer供应商参数，仅适用于getMap请求。返回渲染过程引发异常时渲染的所有内容。可以与WMS配置限制一起使用，以返回部分图像，即使由于超过这些限制之一而被终止的请求也是如此。它也可以与timeout vendor参数一起使用。</td>
</tr>
<tr>
<td>JSON格式</td>
<td>EXCEPTIONS=application/json</td>
<td>简单的Json表示形式。</td>
</tr>
<tr>
<td>JSONP</td>
<td>EXCEPTIONS=text/javascript</td>
<td>返回以下格式的JsonP：paddingOutput（…jsonp…）。请参阅WMS供应商参数以更改回调名称。请注意，默认情况下禁用此格式（请参阅影响WMS的全局变量）。</td>
</tr>
</tbody>
</table>
<h4 id="getcapabilities">GetCapabilities</h4>
<p>该操作请求有关由<code>WMS</code>服务器提供的操作，服务和数据的元数据。<br>
<code>GetCapabilities</code>操作的参数为：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>是否必须</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>service</td>
<td>是</td>
<td>服务名称。值是WMS</td>
</tr>
<tr>
<td>version</td>
<td>是</td>
<td>服务版本。值是一个1.0.0，1.1.0，1.1.1，1.3.0。</td>
</tr>
<tr>
<td>request</td>
<td>是</td>
<td>操作名称。值是GetCapabilities。</td>
</tr>
</tbody>
</table>
<p><code>GeoServer</code>为<code>GetCapabilities</code>操作提供以下特定于供应商的参数。它们在<code>WMS</code>供应商参数部分中有完整记录。</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>是否必须</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>namespace</td>
<td>否</td>
<td>将响应限制为给定名称空间中的层</td>
</tr>
<tr>
<td>format</td>
<td>否</td>
<td>以某种格式请求功能文档</td>
</tr>
<tr>
<td>rootLayer</td>
<td>否</td>
<td>标记以启用/禁用标准“根”顶层图层元素。值是对还是错。如果为false，则仅当存在多个顶级层时才包括Root元素，如果只有一层，则它将是根层本身。指定后，将以相同的行为覆盖全局WMS设置或图层/组设置。</td>
</tr>
</tbody>
</table>
<p><code>GetCapabilities</code>请求的一个示例：</p>
<pre><code class="language-js">http://localhost:8080/geoserver/wms?
service=wms&amp;
version=1.1.1&amp;
request=GetCapabilities
</code></pre>
<p>有被传递到<code>WMS</code>服务器，三个参数<code>service=wms</code>，<code>version=1.1.1</code>和<code>request=GetCapabilities</code>。该<code>service</code>参数告诉<code>WMS</code>服务器即将收到<code>WMS</code>请求。该<code>version</code>参数表示正在请求哪个版本的<code>WMS</code>。该<code>request</code>参数指定<code>GetCapabilities</code>操作。<code>WMS</code>标准要求请求始终包含这三个参数。<code>GeoServer</code>放宽了这些要求（如果省略则通过设置默认版本），但是对于标准合规性，应始终指定它们。</p>
<p>响应是功能<code>XML</code>文档，该文档是<code>WMS</code>服务的详细说明。它包含三个主要部分：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>Service</td>
<td>包含服务元数据，例如服务于服务器的组织的服务名称，关键字和联系信息。</td>
</tr>
<tr>
<td>Request</td>
<td>描述WMS服务提供的操作以及每个操作的参数和输出格式。如果需要，可以将GeoServer配置为禁用对某些WMS操作的支持。</td>
</tr>
<tr>
<td>Request</td>
<td>列出可用的坐标系和图层。在GeoServer中，图层以“名称空间：图层”的形式命名。每一层都提供服务元数据，例如标题，摘要和关键字。</td>
</tr>
</tbody>
</table>
<h4 id="getmap">GetMap</h4>
<p><code>GetMap</code>操作是获取到服务器生成的地图。他的请求参数可以控制在地图上显示的一个或多个图层和样式，地图范围的边界框，目标空间参考系统以及输出的宽度，高度和格式。</p>
<p>响应是地图图像或其他地图输出工件，具体取决于请求的格式。<code>GeoServer</code>提供了多种输出格式，以<code>WMS</code>输出格式描述。</p>
<p><code>GetMap</code>操作的标准参数为：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>是否必须</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>service</td>
<td>是</td>
<td>服务名称。值是WMS。</td>
</tr>
<tr>
<td>version</td>
<td>是</td>
<td>服务版本。值可以是1.0.0，1.1.0，1.1.1，1.3.0。</td>
</tr>
<tr>
<td>request</td>
<td>是</td>
<td>操作名称。值是GetMap。</td>
</tr>
<tr>
<td>layers</td>
<td>是</td>
<td>要在地图上显示的图层。值是层名称的逗号分隔列表。</td>
</tr>
<tr>
<td>styles</td>
<td>是</td>
<td>渲染图层的样式。值是样式名称的逗号分隔列表，如果需要默认样式，则为空。列表中的样式名称可能为空，以使用默认的图层样式。</td>
</tr>
<tr>
<td>srs/crs</td>
<td>是</td>
<td>地图输出的空间参考系统。格式是<code>EPSG:nnn</code>。 crs是WMS 1.3.0中使用的参数。</td>
</tr>
<tr>
<td>bbox</td>
<td>是</td>
<td>地图范围的边界框。格式是 minx,miny,maxx,maxy以SRS 为单位。</td>
</tr>
<tr>
<td>width</td>
<td>是</td>
<td>地图输出的宽度（以像素为单位）。</td>
</tr>
<tr>
<td>height</td>
<td>是</td>
<td>地图输出的高度，以像素为单位。</td>
</tr>
<tr>
<td>format</td>
<td>是</td>
<td>地图输出的格式。有关支持的值，请参阅WMS输出格式。</td>
</tr>
<tr>
<td>transparent</td>
<td>否</td>
<td>地图背景是否应该透明。值是true或false。默认为false</td>
</tr>
<tr>
<td>bgcolor</td>
<td>否</td>
<td>地图图像的背景色。格式是RRGGBB。默认为FFFFFF（白色）。</td>
</tr>
<tr>
<td>exceptions</td>
<td>否</td>
<td>报告异常的格式。默认值为application/vnd.ogc.se_xml。</td>
</tr>
<tr>
<td>time</td>
<td>否</td>
<td>地图数据的时间值或范围。有关更多信息，请参见GeoServer WMS中的时间支持。</td>
</tr>
<tr>
<td>sld</td>
<td>否</td>
<td>引用StyledLayerDescriptor XML文件的URL，该URL 可以控制或增强地图图层和样式</td>
</tr>
<tr>
<td>sld_body</td>
<td>否</td>
<td>URL编码的StyledLayerDescriptor XML文档，用于控制或增强地图图层和样式</td>
</tr>
</tbody>
</table>
<p>下面的示例是在<code>SRS:'EPGS：4326'</code>中使用默认样式,将图层输出为<code>PNG</code>的<code>WMS</code>请求：</p>
<pre><code class="language-js">http://localhost:8080/geoserver/wms?
request=GetMap
&amp;service=WMS
&amp;version=1.1.1
&amp;layers=topp%3Astates
&amp;styles=population
&amp;srs=EPSG%3A4326
&amp;bbox=-145.15104058007,21.731919794922,-57.154894212888,58.961058642578&amp;
&amp;width=780
&amp;height=330
&amp;format=image%2Fpng
</code></pre>
<p>使用<code>GetMap XML</code>文档的示例<code>WMS</code>请求为：</p>
<pre><code class="language-html">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;ogc:GetMap xmlns:ogc=&quot;http://www.opengis.net/ows&quot;
            xmlns:gml=&quot;http://www.opengis.net/gml&quot;
   version=&quot;1.1.1&quot; service=&quot;WMS&quot;&gt;
   &lt;StyledLayerDescriptor version=&quot;1.0.0&quot;&gt;
      &lt;NamedLayer&gt;
        &lt;Name&gt;topp:states&lt;/Name&gt;
        &lt;NamedStyle&gt;&lt;Name&gt;population&lt;/Name&gt;&lt;/NamedStyle&gt;
      &lt;/NamedLayer&gt;
   &lt;/StyledLayerDescriptor&gt;
   &lt;BoundingBox srsName=&quot;http://www.opengis.net/gml/srs/epsg.xml#4326&quot;&gt;
      &lt;gml:coord&gt;&lt;gml:X&gt;-130&lt;/gml:X&gt;&lt;gml:Y&gt;24&lt;/gml:Y&gt;&lt;/gml:coord&gt;
      &lt;gml:coord&gt;&lt;gml:X&gt;-55&lt;/gml:X&gt;&lt;gml:Y&gt;50&lt;/gml:Y&gt;&lt;/gml:coord&gt;
   &lt;/BoundingBox&gt;
   &lt;Output&gt;
      &lt;Format&gt;image/png&lt;/Format&gt;
      &lt;Size&gt;&lt;Width&gt;550&lt;/Width&gt;&lt;Height&gt;250&lt;/Height&gt;&lt;/Size&gt;
   &lt;/Output&gt;
&lt;/ogc:GetMap&gt;
</code></pre>
<p><code>time</code>参数允许按时间切片和空间图块过滤数据集以进行渲染。</p>
<h4 id="getfeatureinfo">GetFeatureInfo</h4>
<p><code>GetFeatureInfo</code>操作是请求地图上给定位置要素的空间和属性数据。它与<code>WFS GetFeature</code>操作类似，但是在输入和输出方面都不太灵活。由于<code>GeoServer</code>提供了<code>WFS</code>服务，因此建议尽可能不要使用<code>GetFeatureInfo</code>。<br>
<code>GetFeatureInfo</code>操作的一个优点是他的请求使用来自返回的<code>WMS</code>图像的（<code>x，y</code>）像素值。对于有时候获取不到地理参考坐标，这个操作还是很方便的。<br>
<code>GetFeatureInfo</code>操作的标准参数是：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>是否必须</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>service</td>
<td>是</td>
<td>服务名称。值是WMS。</td>
</tr>
<tr>
<td>version</td>
<td>是</td>
<td>服务版本。值是一个1.0.0，1.1.0，1.1.1，1.3.0。</td>
</tr>
<tr>
<td>request</td>
<td>是</td>
<td>操作名称。值是GetFeatureInfo。</td>
</tr>
<tr>
<td>layers</td>
<td>是</td>
<td>同GetMap操作</td>
</tr>
<tr>
<td>styles</td>
<td>是</td>
<td>同GetMap操作</td>
</tr>
<tr>
<td>srs/crs</td>
<td>是}	同GetMap操作</td>
<td></td>
</tr>
<tr>
<td>bbox</td>
<td>是</td>
<td>同GetMap操作</td>
</tr>
<tr>
<td>width</td>
<td>是</td>
<td>同GetMap操作</td>
</tr>
<tr>
<td>height</td>
<td>是</td>
<td>同GetMap操作</td>
</tr>
<tr>
<td>query_layers</td>
<td>是</td>
<td>用逗号分隔的一层或多层查询列表。</td>
</tr>
<tr>
<td>info_format</td>
<td>否</td>
<td>功能信息响应的格式。有关值，请参见下文。</td>
</tr>
<tr>
<td>feature_count</td>
<td>否</td>
<td>要返回的最大特征数。默认值为1。</td>
</tr>
<tr>
<td>x / i</td>
<td>是</td>
<td>地图上查询点的X坐标，以像素为单位。左侧为0。 i是WMS 1.3.0中使用的参数键。</td>
</tr>
<tr>
<td>y / j</td>
<td>是</td>
<td>地图上查询点的Y坐标，以像素为单位。0是顶部。 j是WMS 1.3.0中使用的参数键。</td>
</tr>
<tr>
<td>exceptions</td>
<td>否</td>
<td>报告异常的格式。默认值为application/vnd.ogc.se_xml。</td>
</tr>
</tbody>
</table>
<p><code>GeoServer</code>支持多种<code>GetFeatureInfo</code>响应输出格式。默认的格式是服务器上定义的<code>HTML</code>格式。为了最大程度地控制和定制，客户端应使用<code>GML3</code>并对原始数据本身进行样式设置。支持的格式为：</p>
<table>
<thead>
<tr>
<th>格式</th>
<th>表达式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>文本</td>
<td>info_format=text/plain</td>
<td>简单文本输出。（默认格式）</td>
</tr>
<tr>
<td>GML 2</td>
<td>info_format=application/vnd.ogc.gml</td>
<td>仅适用于简单功能（请参阅复杂功能）</td>
</tr>
<tr>
<td>GML 3</td>
<td>info_format=application/vnd.ogc.gml/3.1.1</td>
<td>适用于简单功能和复杂功能（请参阅“ 复杂功能”）</td>
</tr>
<tr>
<td>HTML</td>
<td>info_format=text/html</td>
<td>使用服务器上定义的HTML模板。有关如何对HTML输出进行模板化的信息，请参见GetFeatureInfo模板。</td>
</tr>
<tr>
<td>JSON格式</td>
<td>info_format=application/json</td>
<td>简单的Json表示形式。</td>
</tr>
<tr>
<td>JSONP</td>
<td>info_format=text/javascript</td>
<td>返回JSONP形式：parseResponse(...json...)。请参阅WMS供应商参数以更改回调名称。请注意，默认情况下禁用此格式（请参阅影响WMS的全局变量）。</td>
</tr>
</tbody>
</table>
<p><code>GeoServer</code>为<code>GetFeatureInfo</code>操作提供以下特定于供应商的参数。</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>是否必须</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>buffer</td>
<td>否</td>
<td>查询点周围搜索半径的宽度。</td>
</tr>
<tr>
<td>cql_filter</td>
<td>否</td>
<td>过滤返回的数据，采用ECQL格式</td>
</tr>
<tr>
<td>filter</td>
<td>否</td>
<td>以OGC过滤器格式过滤返回的数据</td>
</tr>
<tr>
<td>propertyName</td>
<td>否</td>
<td>要返回的特征属性</td>
</tr>
<tr>
<td>exclude_nodata_result</td>
<td>否</td>
<td>设置为true时，当要素的查询像素值为nodata时，将返回NaN。</td>
</tr>
</tbody>
</table>
<p>下面的示例是从<code>topp:states</code>图层以<code>HTML</code>格式请求要素信息：</p>
<pre><code class="language-js">http://localhost:8080/geoserver/wms?
request=GetFeatureInfo
&amp;service=WMS
&amp;version=1.1.1
&amp;layers=topp%3Astates
&amp;styles=
&amp;srs=EPSG%3A4326
&amp;format=image%2Fpng
&amp;bbox=-145.151041%2C21.73192%2C-57.154894%2C58.961059
&amp;width=780
&amp;height=330
&amp;query_layers=topp%3Astates
&amp;info_format=text%2Fhtml
&amp;feature_count=50
&amp;x=353
&amp;y=145
&amp;exceptions=application%2Fvnd.ogc.se_xml
</code></pre>
<p>对<code>GeoJSON</code>格式的特征信息的示例请求为：</p>
<pre><code class="language-js">http://localhost:8080/geoserver/wms?
&amp;INFO_FORMAT=application/json
&amp;REQUEST=GetFeatureInfo
&amp;EXCEPTIONS=application/vnd.ogc.se_xml
&amp;SERVICE=WMS
&amp;VERSION=1.1.1
&amp;WIDTH=970&amp;HEIGHT=485&amp;X=486&amp;Y=165&amp;BBOX=-180,-90,180,90
&amp;LAYERS=COUNTRYPROFILES:grp_administrative_map
&amp;QUERY_LAYERS=COUNTRYPROFILES:grp_administrative_map
&amp;TYPENAME=COUNTRYPROFILES:grp_administrative_map
</code></pre>
<p>请求的结果：</p>
<pre><code class="language-js">{
&quot;type&quot;:&quot;FeatureCollection&quot;,
&quot;features&quot;:[
   {
      &quot;type&quot;:&quot;Feature&quot;,
      &quot;id&quot;:&quot;dt_gaul_geom.fid-138e3070879&quot;,
      &quot;geometry&quot;:{
         &quot;type&quot;:&quot;MultiPolygon&quot;,
         &quot;coordinates&quot;:[
            [
               [
                  [
                     XXXXXXXXXX,
                     XXXXXXXXXX
                  ],
                  ...
                  [
                     XXXXXXXXXX,
                     XXXXXXXXXX
                  ]
               ]
            ]
         ]
      },
      &quot;geometry_name&quot;:&quot;at_geom&quot;,
      &quot;properties&quot;:{
         &quot;bk_gaul&quot;:X,
         &quot;at_admlevel&quot;:0,
         &quot;at_iso3&quot;:&quot;XXX&quot;,
         &quot;ia_name&quot;:&quot;XXXX&quot;,
         &quot;at_gaul_l0&quot;:X,
         &quot;bbox&quot;:[
            XXXX,
            XXXX,
            XXXX,
            XXXX
         ]
      }
   }
],
&quot;crs&quot;:{
   &quot;type&quot;:&quot;EPSG&quot;,
   &quot;properties&quot;:{
      &quot;code&quot;:&quot;4326&quot;
   }
},
&quot;bbox&quot;:[
   XXXX,
   XXXX,
   XXXX,
   XXXX
]
}
</code></pre>
<h4 id="describelayer">DescribeLayer</h4>
<p>该<code>DescribeLayer</code>操作主要是通过了解基于<code>SLD-WMS</code>客户端使用。为了制作<code>SLD</code>，需要知道数据的结构。<code>WMS</code>和<code>WFS</code>都有执行此操作的操作，因此<code>DescribeLayer</code>操作仅将客户端路由到适当的服务。<br>
<code>DescribeLayer</code>操作的标准参数是：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>是否必须</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>service</td>
<td>是</td>
<td>服务名称。值是WMS。</td>
</tr>
<tr>
<td>version</td>
<td>是</td>
<td>服务版本。值是1.1.1。</td>
</tr>
<tr>
<td>request</td>
<td>是</td>
<td>操作名称。值是DescribeLayer。</td>
</tr>
<tr>
<td>layers</td>
<td>是</td>
<td>同GetMap</td>
</tr>
<tr>
<td>exceptions</td>
<td>否</td>
<td>报告异常的格式。默认值为application/vnd.ogc.se_xml。</td>
</tr>
</tbody>
</table>
<p><code>GeoServer</code>支持多种<code>DescribeLayer</code>响应输出格式。最常用的格式是服务器样式的<code>HTML</code>模板。支持的格式为：</p>
<table>
<thead>
<tr>
<th>格式</th>
<th>表达式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>文本</td>
<td>output_format=text/xml</td>
<td>与默认值相同。</td>
</tr>
<tr>
<td>GML 2</td>
<td>output_format=application/vnd.ogc.wms_xml</td>
<td>默认格式。</td>
</tr>
<tr>
<td>JSON格式</td>
<td>output_format=application/json</td>
<td>简单的Json表示形式。</td>
</tr>
<tr>
<td>JSONP</td>
<td>output_format=text/javascript</td>
<td>返回以下格式的JsonP：paddingOutput（…jsonp…）。请参阅WMS供应商参数以更改回调名称。请注意，默认情况下禁用此格式（请参阅影响WMS的全局变量）。</td>
</tr>
</tbody>
</table>
<p>对图层组上的<code>JSON</code>格式的特征描述的示例请求为：</p>
<pre><code class="language-js">http://localhost:8080/geoserver/wms?service=WMS
&amp;version=1.1.1
&amp;request=DescribeLayer
&amp;layers=sf:roads,topp:tasmania_roads,nurc:mosaic
&amp;outputFormat=application/json
</code></pre>
<p>请求结果：</p>
<pre><code class="language-js">{
  version: &quot;1.1.1&quot;,
  layerDescriptions: [
    {
        layerName: &quot;sf:roads&quot;,
        owsURL: &quot;http://localhost:8080/geoserver/wfs/WfsDispatcher?&quot;,
        owsType: &quot;WFS&quot;,
        typeName: &quot;sf:roads&quot;
    },
    {
        layerName: &quot;topp:tasmania_roads&quot;,
        owsURL: &quot;http://localhost:8080/geoserver/wfs/WfsDispatcher?&quot;,
        owsType: &quot;WFS&quot;,
        typeName: &quot;topp:tasmania_roads&quot;
    },
    {
        layerName: &quot;nurc:mosaic&quot;,
        owsURL: &quot;http://localhost:8080/geoserver/wcs?&quot;,
        owsType: &quot;WCS&quot;,
        typeName: &quot;nurc:mosaic&quot;
    }
  ]
</code></pre>
<h4 id="getlegendgraphic">GetLegendGraphic</h4>
<p>可以查看这篇文章 https://docs.geoserver.org/stable/en/user/services/wms/get_legend_graphic/index.html#get-legend-graphic</p>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://jiegiser.github.io/newBlog/tag/4IlMTsTht" class="tag">
                    geoserver
                  </a>
                
                  <a href="https://jiegiser.github.io/newBlog/tag/To24QfiOA" class="tag">
                    webgis
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://jiegiser.github.io/newBlog/post/vue-bi-ji">
                  <h3 class="post-title">
                    Vue笔记
                  </h3>
                </a>
              </div>
            

            
              
                <div id="gitalk-container" data-aos="fade-in"></div>
              

              
            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>



  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: '4018355925b4a033100a',
        clientSecret: 'dca55db969b5b038fd93d505abde0d058ad3032e',
        repo: 'newBlog',
        owner: 'jiegiser',
        admin: ['jiegiser'],
        id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>
